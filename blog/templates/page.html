{% import "macros/post_toc.html" as post_toc %} {% import
"macros/series_toc.html" as series_toc %} {% extends "index.html" %} {% block
title %}{{ page.title }}{% endblock title %} {% block main %}

<div>
  <div id="post-header">
    <h1 class="text-4xl md:text-6xl font-semibold mb-2">{{ page.title }}</h1>
    <div class="flex justify-between">
      {% if page.updated %}
      <time
        class="uppercase font-light text-xs self-end dark:"
        aria-label="Last updated on"
        datetime="{{ page.date }}"
        >updated
        <strong>{{ page.updated | date(format='%d-%b-%Y') }}</strong></time
      >
      {% endif %}
      <time
        class="uppercase font-light text-xs self-end dark:"
        aria-label="Published on"
        datetime="{{ page.date }}"
        >published
        <strong>{{ page.date | date(format='%d-%b-%Y') }}</strong></time
      >
    </div>
    <hr class="border-purple-400 dark:border-purple-200 mb-4" />
  </div>

  {% if page.higher or page.lower %}
  <aside class="mb-8" id="series-toc-panel">
    <div id="series-toc">
      {{ series_toc::render(parent_section=page.ancestors |
      last,current_page=page) }}
    </div>
  </aside>
  {% endif %}

  <aside id="toc-panel">
    <button
      id="toc-toggle"
      type="button"
      aria-label="Toggle TOC"
      class="py-1 mb-2 visited:outline-none active:outline-none"
      x-data="{ open: false }"
      @click="open = !open; document.getElementById('toc').classList.toggle('hidden')"
    >
      <span :class="!open ? 'visible' : 'hidden'">&#x25B7;&nbsp;</span
      ><span :class="open ? 'visible' : 'hidden'">&#x25BD;&nbsp;</span
      ><span class="uppercase">table of contents</span>
    </button>
    <div id="toc" class="hidden">{{ post_toc::render(toc=page.toc) }}</div>
  </aside>

  <br />

  <div id="md-content">{{ page.content | safe }}</div>
</div>
{#
<button
  id="scroll-to-top"
  type="button"
  aria-label="Scroll to top"
  class="fixed bottom-8 right-2 sm:bottom-10 sm:right-10 z-50 dark:bg-purple-700 border-[1px] border-purple-700 dark:border-purple-100 rounded-md leading-tight px-[4px] active:outline-none"
  x-data
  @click="window.scrollTo({ top: 0, behavior: 'smooth' })"
>
  &#x23CF;
</button>
#} {% endblock main %} {%block giscus_script %} {% if not
page.extra.comments_disabled %}
<script>
  let giscusTheme = document.documentElement.classList.contains("dark")
    ? "purple_dark"
    : "light";

  let giscusAttributes = {
    src: "https://giscus.app/client.js",
    "data-repo": "abjrcode/blog-madin",
    "data-repo-id": "R_kgDOKP4BUQ",
    "data-category": "General",
    "data-category-id": "DIC_kwDOKP4BUc4CZItL",
    "data-mapping": "title",
    "data-strict": "1",
    "data-reactions-enabled": "1",
    "data-emit-metadata": "0",
    "data-input-position": "bottom",
    "data-theme": giscusTheme,
    "data-lang": "en",
    "data-loading": "lazy",
    crossorigin: "anonymous",
    async: "",
  };

  let giscusScript = document.createElement("script");

  Object.entries(giscusAttributes).forEach(([key, value]) =>
    giscusScript.setAttribute(key, value)
  );

  document.getElementById("rootContainer").appendChild(giscusScript);

  function sendGiscusFrameMessage(message) {
    const iframe = document.querySelector("iframe.giscus-frame");
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: message }, "https://giscus.app");
  }

  window.addEventListener("theme-switch", (event) => {
    const currentTheme = event.detail;
    const giscusTheme = currentTheme === "dark" ? "purple_dark" : "light";
    sendGiscusFrameMessage({ setConfig: { theme: giscusTheme } });
  });
</script>
{% endif %} {% endblock giscus_script %}
