{% import "macros/post_toc.html" as post_toc %} {% import
"macros/series_toc.html" as series_toc %} {% extends "index.html" %} {% block
title %}{{ page.title }}{% endblock title %} {% block main %}
<div class="min-w-full">
  <div id="post-header">
    <h1 class="text-4xl md:text-6xl font-semibold mb-2">{{ page.title }}</h1>
    <div class="flex justify-between">
      {% if page.updated %}
      <time
        class="inline-flex items-center gap-1 font-light text-xs self-end"
        datetime="{{ page.date }}"
        ><svg
          class="inline-block w-3 h-3"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 20 18"
        >
          <path
            d="M12.687 14.408a3.01 3.01 0 0 1-1.533.821l-3.566.713a3 3 0 0 1-3.53-3.53l.713-3.566a3.01 3.01 0 0 1 .821-1.533L10.905 2H2.167A2.169 2.169 0 0 0 0 4.167v11.666A2.169 2.169 0 0 0 2.167 18h11.666A2.169 2.169 0 0 0 16 15.833V11.1l-3.313 3.308Zm5.53-9.065.546-.546a2.518 2.518 0 0 0 0-3.56 2.576 2.576 0 0 0-3.559 0l-.547.547 3.56 3.56Z"
          />
          <path
            d="M13.243 3.2 7.359 9.081a.5.5 0 0 0-.136.256L6.51 12.9a.5.5 0 0 0 .59.59l3.566-.713a.5.5 0 0 0 .255-.136L16.8 6.757 13.243 3.2Z"
          />
        </svg>
        <strong>{{ page.updated | date(format='%d-%b-%Y') }}</strong></time
      >
      {% endif %}
      <time
        class="inline-flex gap-1 items-center font-light text-xs self-end"
        datetime="{{ page.date }}"
        ><svg
          class="inline-block w-3 h-3"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 20 20"
        >
          <path
            fill="currentColor"
            d="M6 1a1 1 0 0 0-2 0h2ZM4 4a1 1 0 0 0 2 0H4Zm7-3a1 1 0 1 0-2 0h2ZM9 4a1 1 0 1 0 2 0H9Zm7-3a1 1 0 1 0-2 0h2Zm-2 3a1 1 0 1 0 2 0h-2ZM1 6a1 1 0 0 0 0 2V6Zm18 2a1 1 0 1 0 0-2v2ZM5 11v-1H4v1h1Zm0 .01H4v1h1v-1Zm.01 0v1h1v-1h-1Zm0-.01h1v-1h-1v1ZM10 11v-1H9v1h1Zm0 .01H9v1h1v-1Zm.01 0v1h1v-1h-1Zm0-.01h1v-1h-1v1ZM10 15v-1H9v1h1Zm0 .01H9v1h1v-1Zm.01 0v1h1v-1h-1Zm0-.01h1v-1h-1v1ZM15 15v-1h-1v1h1Zm0 .01h-1v1h1v-1Zm.01 0v1h1v-1h-1Zm0-.01h1v-1h-1v1ZM15 11v-1h-1v1h1Zm0 .01h-1v1h1v-1Zm.01 0v1h1v-1h-1Zm0-.01h1v-1h-1v1ZM5 15v-1H4v1h1Zm0 .01H4v1h1v-1Zm.01 0v1h1v-1h-1Zm0-.01h1v-1h-1v1ZM2 4h16V2H2v2Zm16 0h2a2 2 0 0 0-2-2v2Zm0 0v14h2V4h-2Zm0 14v2a2 2 0 0 0 2-2h-2Zm0 0H2v2h16v-2ZM2 18H0a2 2 0 0 0 2 2v-2Zm0 0V4H0v14h2ZM2 4V2a2 2 0 0 0-2 2h2Zm2-3v3h2V1H4Zm5 0v3h2V1H9Zm5 0v3h2V1h-2ZM1 8h18V6H1v2Zm3 3v.01h2V11H4Zm1 1.01h.01v-2H5v2Zm1.01-1V11h-2v.01h2Zm-1-1.01H5v2h.01v-2ZM9 11v.01h2V11H9Zm1 1.01h.01v-2H10v2Zm1.01-1V11h-2v.01h2Zm-1-1.01H10v2h.01v-2ZM9 15v.01h2V15H9Zm1 1.01h.01v-2H10v2Zm1.01-1V15h-2v.01h2Zm-1-1.01H10v2h.01v-2ZM14 15v.01h2V15h-2Zm1 1.01h.01v-2H15v2Zm1.01-1V15h-2v.01h2Zm-1-1.01H15v2h.01v-2ZM14 11v.01h2V11h-2Zm1 1.01h.01v-2H15v2Zm1.01-1V11h-2v.01h2Zm-1-1.01H15v2h.01v-2ZM4 15v.01h2V15H4Zm1 1.01h.01v-2H5v2Zm1.01-1V15h-2v.01h2Zm-1-1.01H5v2h.01v-2Z"
          />
        </svg>

        <strong>{{ page.date | date(format='%d-%b-%Y') }}</strong></time
      >
    </div>
    <hr class="border-purple-400 dark:border-purple-200 mb-4" />
  </div>

  {% if page.higher or page.lower %}
  <aside class="mb-8" id="series-toc-panel">
    <div id="series-toc">
      {{ series_toc::render(parent_section=page.ancestors |
      last,current_page=page) }}
    </div>
  </aside>
  {% endif %} {% if page.toc %}
  <aside id="toc-panel">
    <button
      id="toc-toggle"
      type="button"
      aria-label="Toggle TOC"
      class="py-1 mb-2 visited:outline-none active:outline-none"
      x-data="{ open: false }"
      @click="open = !open; document.getElementById('toc').classList.toggle('hidden')"
    >
      <span :class="!open ? 'visible' : 'hidden'">&#x25B7;&nbsp;</span
      ><span :class="open ? 'visible' : 'hidden'">&#x25BD;&nbsp;</span
      ><span class="uppercase">table of contents</span>
    </button>
    <div id="toc" class="hidden">{{ post_toc::render(toc=page.toc) }}</div>
  </aside>
  {% endif %}

  <br />

  <div id="md-content">{{ page.content | safe }}</div>
</div>

{% if page.lower or page.higher %}
<div class="flex text-lg my-6">
  {% if page.lower %}
  <a
    href="{{ page.lower.permalink }}"
    id="previous-post"
    aria-label="Previous Post"
    class="hover:drop-shadow dark:hover:drop-shadow-[0_2px_4px_rgba(255,255,255,0.70)]"
  >
    &LeftAngleBracket; {{ page.lower.title }}
  </a>
  {% endif %} {% if page.higher %}
  <a
    href="{{ page.higher.permalink }}"
    id="next-post"
    aria-label="Next Post"
    class="ml-auto hover:drop-shadow dark:hover:drop-shadow-[0_2px_4px_rgba(255,255,255,0.70)]"
  >
    {{ page.higher.title }} &RightAngleBracket;
  </a>
  {% endif %}
</div>
{% endif %}

<button
  id="scroll-to-top"
  type="button"
  aria-label="Scroll to top"
  class="hidden fixed w-16 bottom-16 right-1/2 translate-x-1/2 z-50 bg-purple-500 text-purple-50 dark:bg-purple-200 dark:text-purple-700 rounded-sm shadow-lg font-semibold border-2 border-purple-400 dark:border-purple-700 leading-tight px-[4px] active:outline-none"
  x-data="{ pageHeightThreshold: 800, lastScrollTop: 0 }"
  @click="window.scrollTo({ top: 0, behavior: 'smooth' })"
  @scroll.window="window.pageYOffset > pageHeightThreshold && window.pageYOffset < lastScrollTop ? $el.classList.remove('hidden') : $el.classList.add('hidden'); lastScrollTop = window.pageYOffset < 0 ? 0 : window.pageYOffset;"
>
  &#x23CF;
</button>

{% endblock main %} {%block giscus_script %} {% if not
page.extra.comments_disabled and config.mode != "serve" %}
<script>
  let giscusTheme = document.documentElement.classList.contains("dark")
    ? "purple_dark"
    : "light";

  let giscusAttributes = {
    src: "https://giscus.app/client.js",
    "data-repo": "abjrcode/blog-madin",
    "data-repo-id": "R_kgDOKP4BUQ",
    "data-category": "General",
    "data-category-id": "DIC_kwDOKP4BUc4CZItL",
    "data-mapping": "title",
    "data-strict": "1",
    "data-reactions-enabled": "1",
    "data-emit-metadata": "0",
    "data-input-position": "bottom",
    "data-theme": giscusTheme,
    "data-lang": "en",
    "data-loading": "lazy",
    crossorigin: "anonymous",
    async: "",
  };

  let giscusScript = document.createElement("script");

  Object.entries(giscusAttributes).forEach(([key, value]) =>
    giscusScript.setAttribute(key, value)
  );

  document.getElementById("rootContainer").appendChild(giscusScript);

  function sendGiscusFrameMessage(message) {
    const iframe = document.querySelector("iframe.giscus-frame");
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: message }, "https://giscus.app");
  }

  window.addEventListener("theme-switch", (event) => {
    const currentTheme = event.detail;
    const giscusTheme = currentTheme === "dark" ? "purple_dark" : "light";
    sendGiscusFrameMessage({ setConfig: { theme: giscusTheme } });
  });
</script>
{% endif %} {% endblock giscus_script %}
